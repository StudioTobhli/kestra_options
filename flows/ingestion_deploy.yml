id: ingestion_deploy
namespace: company.team

tasks:
  - id: put_data_ingest
    type: io.kestra.plugin.scripts.python.Commands
    namespaceFiles:
      enabled: true
    taskRunner:
      type: io.kestra.plugin.scripts.runner.docker.Docker
      image: options_python_img:latest
      networkMode: "kestra_options_default"
    containerImage: ghcr.io/kestra-io/pydata:latest
    commands:
      - python put_data_ingest.py

  - id: holdings_ingest
    type: io.kestra.plugin.scripts.python.Commands
    namespaceFiles:
      enabled: true
    taskRunner:
      type: io.kestra.plugin.scripts.runner.docker.Docker
      image: options_python_img:latest
      networkMode: "kestra_options_default"
    containerImage: ghcr.io/kestra-io/pydata:latest
    commands:
      - python holdings_ingest.py
